{"google":"","note":"Don't delete this file! It's used internally to help with page regeneration.","body":"Squid\r\n=====\r\n\r\nSquid compiles your coffee, jade and stylus files, and publish  your assets to amazon s3\r\n\r\n\r\nInstall\r\n-------\r\n\r\ninstall the package globally to use the commands provided by the project (see desc below)\r\n\r\n```\r\n$ npm install -g squid\r\n```\r\n\r\nsq command\r\n----------\r\n\r\nat the root of your project directory execute:\r\n\r\n```\r\n$ sq\r\n```\r\n\r\nor if your main script isn't index.js\r\n\r\n```\r\n$ sq my-script.js\r\n```\r\n\r\nto start node in debug mode\r\n\r\n```\r\n$ sq -d\r\n```\r\n\r\nthis will\r\n\r\n- start your server script\r\n- live recompile your files and emit a growl notification**\r\n- restart your server when a file change inside /lib (server script directory by convention)\r\n\r\nYou can also combine it to a tool like [liveReload] [1] to auto refresh your browser when client files are updated\r\n\r\n\r\n**If you want to enable growl notification, install [growl] [2] and [growlNotify] [3]\r\n\r\n![growl screenshot](https://github.com/pgherveou/squid/raw/gh-pages/images/growl.screenshot.png)\r\n\r\n\r\nsb command\r\n----------\r\nif you just want to build the project source files. use the sb command\r\nat the root of your project directory execute:\r\n\r\n```\r\n$ sb\r\n```\r\n\r\nYou can also use squid to build your project inside your own build script\r\n\r\n```coffee\r\n{builder} = require 'squid'\r\n\r\n# build all files in src except your css folder\r\nbuilder.buildAll except: ['css'], (errs) ->\r\n  if errs\r\n    console.error 'Error building the project'\r\n    console.error \"#{e.file}: #{e.toString()}\" for e in errs\r\n  else\r\n    console.log 'build sucessful!'\r\n```\r\n\r\nSupported files for compilation\r\n-------------------------------\r\n\r\nsquid can compile the following files\r\n\r\n<table>\r\n  <tr>\r\n    <th>file</th><th>operation</th><th>note</th>\r\n  </tr>\r\n  <tr>\r\n    <td>*.js</td><td>copy</td><td>concat dependencies and copy to the output folder</td>\r\n  </tr>\r\n  <tr>\r\n    <td>*.coffee</td><td>compile to js</td><td>files are compiled with bare option</td>\r\n  </tr>\r\n  <tr>\r\n    <td>*.styl</td><td>compile to css</td><td>nib is imported, and /public/images is added to the path</td>\r\n  </tr>\r\n  <tr>\r\n    <td>*.jade</td><td>compile to js</td><td>template are compiled into js and wrapped in a requirejs define function</td>\r\n  </tr>\r\n</table>\r\n\r\nfiles Dependencies\r\n-------------------\r\n\r\nsquid manage your file dependencies and only compile the necessary files.\r\nhere is how you define dependencies for each supported file format\r\n\r\n<table>\r\n  <tr>\r\n    <th>file</th><th>import syntax</th>\r\n  </tr>\r\n  <tr>\r\n    <td>*.js</td><td>//= import foo.js</td>\r\n  </tr>\r\n  <tr>\r\n    <td>*.coffee</td><td>#= import foo.(coffee|js)</td>\r\n  </tr>\r\n  <tr>\r\n    <td>*.styl</td><td>@import foo</td>\r\n  </tr>\r\n  <tr>\r\n    <td>*.jade</td><td>include foo</td>\r\n  </tr>\r\n</table>\r\n\r\nConfiguration\r\n-------------\r\nYou can define a squid.json object to specify src and build folder, and compilation options\r\n\r\n- default options if you dont add a squid.json to your project\r\n\r\n```json\r\n{\r\n  \"src\": \"src\",\r\n  \"build\": \".\",\r\n  \"jade\": {\r\n    \"amd\": true\r\n  },\r\n  \"stylus\": {\r\n    \"url\": [\"public\"],\r\n    \"paths\": [\"public/images\"]\r\n  }\r\n}\r\n```\r\nSo if you have the following project\r\n<pre>\r\n./\r\n|- index.js\r\n|- src\r\n  |- lib\r\n    |- server_file1.coffee\r\n  |- public\r\n    |- js\r\n      |- client_file1.coffee\r\n      |- client_file1.tpl.jade\r\n    |- css\r\n      |- file1.styl\r\n</pre>\r\n\r\nafter running **sb** or **sq**, it will generate the following files\r\n\r\n<pre>\r\n./\r\n|- index.js\r\n|- src\r\n  |- ...\r\n|- lib\r\n  |- server_file1.js\r\n|- public\r\n  |- js\r\n    |- client_file1.js\r\n    |- client_file1.tpl.js\r\n  |- css\r\n    |- file1.css\r\n</pre>\r\n\r\n\r\nIf your project structure is different you can add a custom squid.json configuration: \r\n\r\nThe following config \r\n- use mobile as src folder\r\n- compile mobile/js/* to app/assets/javascripts/mobile\t\t\r\n- compile mobile/stylesheets/* to app/assets/stylesheets/mobile\r\n- config stylus to lookup images in app/assets/images/mobile\r\n- does not wrap jade templates with an amd wrapper\r\n\r\n```json\r\n\r\n{\r\n  \"src\": \"mobile\",\r\n\t\"build\": \".\", \r\n\t\"mappings\": [\t\t\r\n\t\t{\"from\": \"js\", \"to\": \"app/assets/javascripts/mobile\"}, \r\n\t\t{\"from\": \"stylesheets\", \"to\": \"app/assets/stylesheets/mobile\"}\r\n\t],\r\n\t\"stylus\": { \r\n\t\t\"paths\": [\"app/assets/images/mobile\"],\r\n\t\t\"url\": [\"app/assets/\"]\r\n\t}, \t\r\n  \t\"jade\": { \r\n    \t\t\"amd\": false\r\n\t}\r\n}\r\n```\r\n\r\ns3 publication\r\n--------------\r\n\r\nSquid publisher let you upload files within a directory to your amazon s3 bucket.\r\nsquid will only upload  new or modified files to your bucket.\r\nsquid will upload files with a far expiry date and will zip text files\r\n\r\n```coffee\r\n{Publisher} = require 'squid'\r\n\r\n# create s3 publisher\r\npublisher = new Publisher bucket: 'name',  key: 'xx', secret: 'xx'\r\n\r\n# define filter closure that will only select js, png, and css file\r\nfilter = (f, stat) -> stat.isDirectory() or /\\.(js|png|css)$/.test f\r\n\r\n# publish 'public' dir to root folder '' of the  bucket\r\npublisher.publishDir {origin: 'public', dest: '', filter}, cb\r\n\r\n```\r\n\r\n\r\nTODO\r\n----\r\n- Add more compiler options for compiler (PR are welcome)\r\n- Write some tests !!!\r\n\r\n\r\n[1]: http://livereload.com/                                 \"liveReload\"\r\n[2]: http://growl.info/growlupdateavailable                 \"growl\"\r\n[3]: http://growl.info/downloads                            \"growlNotify\"\r\n","name":"Squid","tagline":"Squid compiles your coffee, jade and stylus files, and publish your assets to amazon s3 "}